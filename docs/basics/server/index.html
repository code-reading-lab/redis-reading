<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-basics/server">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Redis源码阅读 server.c | Redis Reading</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/redis-reading/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/redis-reading/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/redis-reading/docs/basics/server"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Redis源码阅读 server.c | Redis Reading"><meta data-rh="true" name="description" content="在分析Redis源码时，首先要了解Redis是什么。Redis（Remote Dictionary Server）是一个高性能的键值存储数据库。它支持多种数据结构，如字符串、哈希、列表、集合、有序集合等，并提供持久化、事务和Lua脚本等功能。Redis的源码是用C语言编写的，源码库托管在GitHub上。"><meta data-rh="true" property="og:description" content="在分析Redis源码时，首先要了解Redis是什么。Redis（Remote Dictionary Server）是一个高性能的键值存储数据库。它支持多种数据结构，如字符串、哈希、列表、集合、有序集合等，并提供持久化、事务和Lua脚本等功能。Redis的源码是用C语言编写的，源码库托管在GitHub上。"><link data-rh="true" rel="icon" href="/redis-reading/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/redis-reading/docs/basics/server"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/redis-reading/docs/basics/server" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/redis-reading/docs/basics/server" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/redis-reading/blog/rss.xml" title="Redis Reading RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/redis-reading/blog/atom.xml" title="Redis Reading Atom Feed"><link rel="stylesheet" href="/redis-reading/assets/css/styles.66d1563d.css">
<link rel="preload" href="/redis-reading/assets/js/runtime~main.7cb0d32f.js" as="script">
<link rel="preload" href="/redis-reading/assets/js/main.4749ee8e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/redis-reading/"><div class="navbar__logo"><img src="/redis-reading/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/redis-reading/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Redis Reading</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/redis-reading/docs/intro">Starting</a><a class="navbar__item navbar__link" href="/redis-reading/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/code-reading-lab/redis-reading" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/redis-reading/docs/intro">Starting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/redis-reading/docs/category/basics">Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/redis">Redis FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/ae">Redis源码阅读 ae.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/dict">Redis源码阅读 dict.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/adlist">Redis源码阅读 adlist.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/anet">Redis源码阅读 anet.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/sds">Redis源码阅读 ads.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/redis-reading/docs/basics/server">Redis源码阅读 server.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/zmalloc">Redis源码阅读 zmalloc.c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/redis-reading/docs/basics/t_zset">Redis源码分析 t_zset.c</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/redis-reading/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial - Extras&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/redis-reading/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/redis-reading/docs/category/basics"><span itemprop="name">Basics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Redis源码阅读 server.c</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Redis源码阅读 server.c</h1><p>在分析Redis源码时，首先要了解Redis是什么。Redis（Remote Dictionary Server）是一个高性能的键值存储数据库。它支持多种数据结构，如字符串、哈希、列表、集合、有序集合等，并提供持久化、事务和Lua脚本等功能。Redis的源码是用C语言编写的，源码库托管在GitHub上。</p><p><code>server.c</code> 是Redis源码中的一个核心文件，它包含了Redis服务的主要功能和逻辑。为了帮助你更好地理解<code>server.c</code>，下面将对其主要组成部分进行概述：</p><ol><li>包含的头文件和全局变量定义：在文件的开头，有许多包含的头文件和全局变量定义，这些头文件和变量为Redis的各种功能提供了支持。</li><li>辅助函数：在<code>server.c</code>中有许多辅助函数，这些函数主要用于完成一些特定的任务，如字符串操作、时间操作、内存管理等。</li><li>事件处理：Redis使用事件驱动模型处理客户端连接、读写请求和超时等事件。<code>server.c</code>包含了处理这些事件的相关代码，如创建事件循环、添加/删除事件处理器等。</li><li>命令处理：<code>server.c</code>包含了命令处理的相关代码，如命令表的初始化、命令查找、参数解析等。Redis支持的每个命令都有一个对应的处理函数，这些函数负责处理命令的逻辑并将结果发送给客户端。</li><li>网络连接管理：<code>server.c</code>负责管理Redis服务端与客户端之间的网络连接，包括创建/关闭连接、读写数据等操作。</li><li>客户端管理：<code>server.c</code>包含了客户端管理的相关代码，如客户端结构体的定义、客户端列表的管理、客户端的创建/销毁等操作。</li><li>数据库操作：<code>server.c</code>包含了Redis数据库操作的相关代码，如数据库的初始化、键值对的读写、过期时间的处理等。</li><li>持久化：Redis支持两种持久化方式，RDB（快照）和AOF（追加写日志）。<code>server.c</code>包含了与持久化相关的代码，如RDB/AOF文件的创建/加载、数据的保存/恢复等。</li><li>主从复制：Redis支持主从复制功能，<code>server.c</code>包含了与主从复制相关的代码，如主从连接的建立、数据同步等。</li><li>Sentinel 和集群：Redis支持Sentinel和集群模式，<code>server.c</code>包含了与这些模式相关的代码，如Sentinel/集群状态的管理、节点的发现和选举等。</li><li>启动和初始化：<code>server.c</code>的最后部分包含了Redis服务的启动和初始化代码。这里定义了<code>main()</code>函数，这是Redis服务的入口点。</li></ol><p>在<code>main()</code>函数中，会进行一系列的初始化操作，包括：
main()函数，这是Redis服务的入口点。在main()函数中，会进行一系列的初始化操作，包括：
a. 解析命令行参数：main()函数首先解析从命令行传入的参数，如配置文件路径、日志级别、端口号等。
b. 读取配置文件：根据命令行参数指定的配置文件路径，读取并解析配置文件，设置相关的配置选项。
c. 初始化服务器状态：初始化服务器状态结构体，包括事件循环、数据库、客户端列表等。
d. 初始化命令表：Redis支持的所有命令都需要在命令表中进行注册。main()函数会调用一个初始化函数来完成这个任务。
e. 设置信号处理器：为了确保Redis服务在接收到特定信号时能够正确响应，需要为这些信号设置处理器。
f. 加载持久化数据：如果配置了RDB或AOF持久化，main()函数会尝试从磁盘加载数据到内存数据库中。
g. 启动事件循环：最后，main()函数会启动事件循环，处理客户端连接、读写请求、超时等事件。
h. 清理和退出：当Redis服务收到退出信号时，main()函数会进行一系列清理操作，如关闭客户端连接、释放内存资源等，然后退出程序。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="头文件引用">头文件引用<a href="#头文件引用" class="hash-link" aria-label="Direct link to 头文件引用" title="Direct link to 头文件引用">​</a></h2><p>首先，server.c文件会引用多个头文件，包含了Redis服务器所需的数据类型、宏定义、全局变量等。一些常用的头文件如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;server.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Redis服务器的主要结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;atomicvar.h&quot;</span><span class="token macro property" style="color:#36acaa">        </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 提供了对原子操作的封装</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;cluster.h&quot;</span><span class="token macro property" style="color:#36acaa">          </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Redis集群相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;db.h&quot;</span><span class="token macro property" style="color:#36acaa">               </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Redis数据库操作相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;object.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Redis对象系统的数据结构和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;rdb.h&quot;</span><span class="token macro property" style="color:#36acaa">              </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含RDB持久化相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;t_string.h&quot;</span><span class="token macro property" style="color:#36acaa">         </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含处理Redis字符串对象的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;t_list.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含处理Redis列表对象的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;t_set.h&quot;</span><span class="token macro property" style="color:#36acaa">            </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含处理Redis集合对象的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;t_zset.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含处理Redis有序集合对象的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;t_hash.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含处理Redis哈希对象的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;slowlog.h&quot;</span><span class="token macro property" style="color:#36acaa">          </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含慢查询日志相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;bio.h&quot;</span><span class="token macro property" style="color:#36acaa">              </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含后台I/O（Background I/O）相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;aof.h&quot;</span><span class="token macro property" style="color:#36acaa">              </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含AOF持久化相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;lazyfree.h&quot;</span><span class="token macro property" style="color:#36acaa">         </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含延迟释放内存相关的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;tracking.h&quot;</span><span class="token macro property" style="color:#36acaa">         </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含客户端缓存跟踪相关的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;networking.h&quot;</span><span class="token macro property" style="color:#36acaa">       </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含网络处理相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;pubsub.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含发布订阅模式相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;module.h&quot;</span><span class="token macro property" style="color:#36acaa">           </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Redis模块系统相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;scripting.h&quot;</span><span class="token macro property" style="color:#36acaa">        </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Lua脚本执行相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;blocked.h&quot;</span><span class="token macro property" style="color:#36acaa">          </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含阻塞客户端相关的结构体和函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;evict.h&quot;</span><span class="token macro property" style="color:#36acaa">            </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含键值对逐出策略相关的函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;quicklist.h&quot;</span><span class="token macro property" style="color:#36acaa">        </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含quicklist数据结构及相关操作函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;rax.h&quot;</span><span class="token macro property" style="color:#36acaa">              </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含rax字典数据结构及相关操作函数声明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;sentinel.h&quot;</span><span class="token macro property" style="color:#36acaa">         </span><span class="token macro property comment" style="color:#999988;font-style:italic">// 包含Redis Sentinel相关的结构体和函数声明</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据结构">数据结构<a href="#数据结构" class="hash-link" aria-label="Direct link to 数据结构" title="Direct link to 数据结构">​</a></h2><p>以下是<code>server.c</code>中主要数据结构的代码表示，以及中文注释：</p><ol><li><code>redisServer</code> 结构体</li></ol><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">redisServer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    redisDb </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">/* 数据库数组 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dict </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">commands</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">/* 命令表 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dict </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">orig_commands</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">/* 模块系统修改前的原始命令表 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aeEventLoop </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">el</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">/* 事件循环，处理客户端连接、读写请求、超时等事件 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">clients</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">/* 已连接客户端列表 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">slaves</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">/* 已连接从服务器列表 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">monitors</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">/* 监控客户端列表 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> hz</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic">/* 服务器每秒执行的事件循环次数 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">rdb_filename</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">/* RDB文件名 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">aof_filename</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">/* AOF文件名 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> redisServer</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><code>client</code> 结构体</li></ol><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">client</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">/* 客户端唯一标识符 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic">/* 客户端连接的文件描述符 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sds name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">/* 客户端名称 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sds querybuf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">/* 查询缓冲区，保存客户端发送的命令 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">/* 命令参数个数 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    robj </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">/* 命令参数数组 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">redisCommand</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cmd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">/* 当前正在处理的命令 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">time_t</span><span class="token plain"> lastinteraction</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">/* 客户端最后一次与服务器交互的时间 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> flags</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">/* 客户端标志位 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>redisObject</strong>
redisObject 是一个通用的数据结构，用于表示 Redis 中的所有数据类型。redisObject 结构体定义在 server.h 文件中，其包含的成员变量如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">redisObject</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> encoding</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> lru</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">LRU_BITS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* LRU time (relative to global lru_clock) or</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            * LFU data (least significant 8 bits frequency</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">                            * and most significant 16 bits access time). */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> refcount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>type：表示 redisObject 的类型，如字符串、列表、哈希表等。</li><li>encoding：表示 redisObject 的编码方式，如 RAW 编码、INT 编码等。</li><li>ptr：指向 redisObject 实际数据的指针。</li><li>refcount：表示 redisObject 的引用计数，用于实现内存回收机制。</li><li>lru：表示 redisObject 最近一次被访问的时间戳，用于实现 LRU 算法。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="命令处理函数">命令处理函数<a href="#命令处理函数" class="hash-link" aria-label="Direct link to 命令处理函数" title="Direct link to 命令处理函数">​</a></h2><p>server.c文件中定义了多个命令处理函数，用于处理客户端发送过来的命令。这些函数都是以cmd_*的形式命名，例如：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cmd_get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redisClient </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cmd_set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redisClient </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cmd_ping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redisClient </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cmd_quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redisClient </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些命令处理函数都接收一个redisClient类型的参数，该参数包含了客户端发送的命令和参数。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="命令表注册">命令表注册<a href="#命令表注册" class="hash-link" aria-label="Direct link to 命令表注册" title="Direct link to 命令表注册">​</a></h2><p>为了方便管理和调用命令处理函数，server.c文件中会定义一个命令表，并将命令处理函数注册到该表中。可以用以下方式来注册命令处理函数：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">CMD</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">name</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">{</span><span class="token macro property string" style="color:#e3116c">&quot;name&quot;</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa"> cmd_</span><span class="token macro property punctuation" style="color:#393A34">##</span><span class="token macro property expression" style="color:#36acaa">name</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa"> arity_</span><span class="token macro property punctuation" style="color:#393A34">##</span><span class="token macro property expression" style="color:#36acaa">name</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa"> flags_</span><span class="token macro property punctuation" style="color:#393A34">##</span><span class="token macro property expression" style="color:#36acaa">name</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa"> group_</span><span class="token macro property punctuation" style="color:#393A34">##</span><span class="token macro property expression" style="color:#36acaa">name</span><span class="token macro property expression punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">redisCommand</span><span class="token plain"> redisCommandTable</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">CMD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">CMD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">CMD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">CMD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">quit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">populateCommandTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">j </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redisCommandTable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">redisCommand</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">redisCommand</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redisCommandTable</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">j</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> retval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        retval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dictAdd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">commands</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">sdsnew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">assert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">retval </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> DICT_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里定义了一个宏CMD，用于将命令名、处理函数、参数个数、标志等信息打包到一个结构体中。然后，使用populateCommandTable函数将所有命令注册到全局的命令字典中。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="事件循环">事件循环<a href="#事件循环" class="hash-link" aria-label="Direct link to 事件循环" title="Direct link to 事件循环">​</a></h2><p>在Redis服务器启动后，server.c文件中会进入一个事件循环，用于处理客户端请求和其他事件。事件循环的主要实现如下：</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">aeMain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aeEventLoop </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">eventLoop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    eventLoop</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stop </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">eventLoop</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">aeProcessEvents</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventLoop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AE_ALL_EVENTS</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   AE_CALL_BEFORE_SLEEP</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   AE_CALL_AFTER_SLEEP</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>该函数会循环调用aeProcessEvents函数，处理所有事件。在处理事件之前，会调用eventLoop-&gt;beforesleep函数，以便处理一些需要在主线程中执行的任务。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="启动函数">启动函数<a href="#启动函数" class="hash-link" aria-label="Direct link to 启动函数" title="Direct link to 启动函数">​</a></h2><p>最后，server.c文件定义了一个main函数，用于启动Redis服务器。该函数的主要过程如下：</p><p>初始化Redis服务器的状态、配置等信息。</p><p>注册命令处理函数到命令表中。</p><p>启动Redis服务器的事件循环。</p><p>停止Redis服务器的事件循环，并释放资源。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis的启动流程">Redis的启动流程<a href="#redis的启动流程" class="hash-link" aria-label="Direct link to Redis的启动流程" title="Direct link to Redis的启动流程">​</a></h2><p>Redis的启动流程可以概括为以下几个步骤：</p><ol><li>初始化： 在<code>main()</code>函数中，Redis首先执行一系列的初始化操作，包括分配和初始化<code>redisServer</code>结构体、设置默认配置参数等。</li><li>解析命令行参数： Redis会解析从命令行传入的参数，例如配置文件路径、日志级别、端口号等。</li><li>读取配置文件： 根据命令行参数指定的配置文件路径，读取并解析配置文件，设置相关的配置选项。</li><li>初始化数据结构： 初始化服务器状态结构体，包括事件循环、数据库、客户端列表等。同时，初始化命令表，注册所有Redis支持的命令。</li><li>设置信号处理器： 为了确保Redis服务在接收到特定信号时能够正确响应，需要为这些信号设置处理器。</li><li>启动服务器端口监听： 根据配置文件中指定的端口号，启动服务器端口监听，以便接受来自客户端的连接请求。</li><li>加载持久化数据： 如果配置了RDB或AOF持久化，Redis会尝试从磁盘加载数据到内存数据库中。</li><li>初始化集群和Sentinel： 如果配置了Redis集群或Sentinel模式，执行相应的初始化操作。</li><li>启动事件循环： 最后，Redis启动事件循环，处理客户端连接、读写请求、超时等事件。</li><li>清理和退出： 当Redis服务收到退出信号时，<code>main()</code>函数会进行一系列清理操作，如关闭客户端连接、释放内存资源等，然后退出程序。</li></ol><p>通过以上步骤，Redis会成功启动并开始接收来自客户端的请求。要深入了解Redis的启动流程和实现细节，请阅读源代码中的<code>main()</code>函数以及相关函数。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/code-reading-lab/redis-reading/tree/docs/docs/basics/server.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/redis-reading/docs/basics/sds"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Redis源码阅读 ads.c</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/redis-reading/docs/basics/zmalloc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis源码阅读 zmalloc.c</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#头文件引用" class="table-of-contents__link toc-highlight">头文件引用</a></li><li><a href="#数据结构" class="table-of-contents__link toc-highlight">数据结构</a></li><li><a href="#命令处理函数" class="table-of-contents__link toc-highlight">命令处理函数</a></li><li><a href="#命令表注册" class="table-of-contents__link toc-highlight">命令表注册</a></li><li><a href="#事件循环" class="table-of-contents__link toc-highlight">事件循环</a></li><li><a href="#启动函数" class="table-of-contents__link toc-highlight">启动函数</a></li><li><a href="#redis的启动流程" class="table-of-contents__link toc-highlight">Redis的启动流程</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/redis-reading/docs/intro">Starting</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/redis" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/antirez" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/redis-reading/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/code-reading-lab/redis-reading" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Code Reading Lab. Built with Docusaurus.</div></div></div></footer></div>
<script src="/redis-reading/assets/js/runtime~main.7cb0d32f.js"></script>
<script src="/redis-reading/assets/js/main.4749ee8e.js"></script>
</body>
</html>